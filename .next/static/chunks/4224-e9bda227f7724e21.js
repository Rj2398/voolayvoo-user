"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4224],{33145:function(e,t,r){r.d(t,{default:function(){return s.a}});var a=r(48461),s=r.n(a)},27648:function(e,t,r){r.d(t,{default:function(){return s.a}});var a=r(72972),s=r.n(a)},99376:function(e,t,r){var a=r(35475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},48461:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let a=r(47043),s=r(55346),n=r(65878),o=a._(r(5084));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=n.Image},14692:function(e,t,r){r.d(t,{default:function(){return d},a:function(){return f}});var a=r(57437),s=r(2265),n=r(68575),o=r(1455),i=r(906);let l=(0,o.xC)({reducer:{user:i.ZP}});var c=r(73685);let u=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,o]=(0,s.useState)(!1),[i,d]=(0,s.useState)({user_id:null,name:"",profile_image:""}),[f,h]=(0,c.Z)("loginUser",null);(0,s.useEffect)(()=>{!async function(){var e;(null==f?void 0:f.token)&&(null==f?void 0:null===(e=f.user_details)||void 0===e?void 0:e.user_id)&&(o(!0),d(null==f?void 0:f.user_details))}()},[]);let y=async()=>{await (0,c.L)("loginUser"),o(!1)};return(0,a.jsx)(n.zt,{store:l,children:(0,a.jsx)(u.Provider,{value:{isAuthenticated:r,login:e=>{console.log(e,"comes from dispatch"),o(!0);let t={token:e.token,user_details:{token:e.token,email:e.email||"",user_id:e.user_id||"",...null==e?void 0:e.user_details[0]}};h(t),d(null==t?void 0:t.user_details)},logout:y,userDetails:i},children:t})})}let f=()=>{let e=(0,s.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},24224:function(e,t,r){var a=r(57437),s=r(14692),n=r(50391),o=r(33145),i=r(27648),l=r(99376),c=r(2265),u=r(7261);t.default=e=>{let{list:t=[],fullwidth:r=!1}=e,[o,h]=(0,c.useState)(""),[y,g]=(0,c.useState)(t);(0,c.useEffect)(()=>{g(t)},[t]),console.log(y,"*****************");let[m,_]=(0,c.useState)([]),{userDetails:v}=(0,s.a)(),b=(0,l.useRouter)();console.log(t,"hello list data comes from");let p=(0,c.useCallback)(e=>{let{value:r}=e.target;h(r),""===r&&g(t)},[t]),j=e=>{e.preventDefault(),o?g(t.filter(e=>null==e?void 0:e.category_name.toLowerCase().includes(o.toLowerCase()))):g(t)},x=(0,c.useCallback)(e=>{_(t=>t.map(t=>({...t,subCategoryArray:null==t?void 0:t.subCategoryArray.filter(t=>!((null==t?void 0:t.sub_category_id)===(null==e?void 0:e.sub_category_id)&&(null==t?void 0:t.sub_category_name)===(null==e?void 0:e.sub_category_name)))})))},[]);(0,c.useEffect)(()=>{let e=t.filter(e=>"Yes"===e.like).map(e=>({category_id:e.category_id,subCategoryArray:e.subcategory.filter(e=>"Yes"===e.like).map(e=>({sub_category_id:e.sub_category_id,sub_category_name:e.sub_category_name}))}));_(t=>[...e])},[t]);let C=async e=>{e.preventDefault();let t=m.filter(e=>e.subCategoryArray.length>0).map(e=>({category_id:e.category_id,sub_category_id:e.subCategoryArray.map(e=>e.sub_category_id).join(",")})),r={user_id:null==v?void 0:v.user_id,selectionList:t};try{let e=await (0,n.Nh)({data:r,endpoint:"user_interest_create",authToken:v.token});if(null==e?void 0:e.success)u.toast.success(null==e?void 0:e.message),b.push("/my/profile/");else throw e}catch(e){u.toast.error("".concat(e))}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"deals-inner-search",children:[(0,a.jsx)("form",{action:"",children:(0,a.jsxs)("label",{htmlFor:"",className:"interests-search",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search for Categories",value:o,onKeyDown:e=>{"Enter"===e.key&&j(e)},onChange:p}),(0,a.jsx)("button",{onClick:j,children:(0,a.jsx)("img",{src:"/images/search.png",alt:"Search"})})]})}),(0,a.jsx)("p",{children:"Sharing your interests would help us curate personalized Voopons & Events for you."})]}),(0,a.jsx)("div",{className:"deals-inner-heading ".concat(r?"w-100":""),children:(0,a.jsx)("h1",{children:"My Interests"})}),(0,a.jsx)("div",{className:"interests-filters ".concat(r?"w-100":""),children:(0,a.jsx)("ul",{children:m.length>0?m.map(e=>{var t;return(null==e?void 0:null===(t=e.subCategoryArray)||void 0===t?void 0:t.length)>0?e.subCategoryArray.map(e=>(0,a.jsx)(d,{subCat:e,removeTab:x},e.sub_category_id)):null}):(0,a.jsx)("p",{children:"No interests selected yet."})})}),(0,a.jsxs)("div",{className:"interests-list",children:[y.length>0&&y.map(e=>(0,a.jsx)(f,{item:e,setSelectionList:_,selectionList:m},"cat"+(null==e?void 0:e.category_id))),t.filter(e=>"Yes"===e.like&&!y.some(t=>t.category_id===e.category_id)).map(e=>(0,a.jsx)(f,{item:e,setSelectionList:_,selectionList:m},"likeCat"+(null==e?void 0:e.category_id)))]}),(0,a.jsx)("div",{className:"interest-btn",children:(0,a.jsx)(i.default,{href:"#",onClick:C,children:"SUBMIT"})})]})};let d=e=>{let{subCat:t,removeTab:r}=e,s=(0,c.useCallback)(e=>{e.preventDefault(),r(t)},[r,t]);return(0,a.jsxs)("li",{children:[t.sub_category_name,(0,a.jsx)(i.default,{href:"#",onClick:s,children:(0,a.jsx)(o.default,{src:"/images/interests/icons_cross.png",alt:"cross",width:15,height:15})})]})},f=e=>{let{item:t,setSelectionList:r,selectionList:s}=e;console.log(s,"set selection list data"),console.log(t,"item data from category list");let[n,o]=(0,c.useState)(!0),i=(0,c.useCallback)(()=>{o(e=>!e)},[]),l=(0,c.useCallback)(e=>{r(r=>{let a=r.findIndex(e=>e.category_id===t.category_id);if(-1===a)return[...r,{category_id:t.category_id,subCategoryArray:[e]}];if(-1===r[a].subCategoryArray.findIndex(t=>t.sub_category_id===e.sub_category_id))return r.map((t,r)=>r===a?{...t,subCategoryArray:[...t.subCategoryArray,e]}:t);{let t=r[a].subCategoryArray.filter(t=>t.sub_category_id!==e.sub_category_id);return 0===t.length?r.filter((e,t)=>t!==a):r.map((e,r)=>r===a?{...e,subCategoryArray:t}:e)}})},[t,r]);return(0,a.jsxs)("div",{className:"deal-search-filter",children:[(0,a.jsx)("div",{onClick:i,children:(0,a.jsxs)("h2",{children:[t.category_name," ",(0,a.jsx)("i",{className:"fas fa-chevron-down ".concat(n?"down-side":"")})]})}),n&&(0,a.jsx)("div",{className:"deal-search-filter-list",children:(0,a.jsx)("ul",{className:"deal-search-filter-list-scroll",children:t.subcategory.map(e=>(0,a.jsx)(h,{subItem:e,handleSelection:l,selectionList:s},e.sub_category_id))})})]})},h=e=>{let{subItem:t,handleSelection:r,selectionList:s}=e,[n,o]=(0,c.useState)(!1),l=(0,c.useCallback)(e=>{e.preventDefault(),r(t)},[r,t]);return(0,c.useEffect)(()=>{o(s.some(e=>e.subCategoryArray.some(e=>e.sub_category_id===t.sub_category_id)))},[t,s]),(0,a.jsx)("li",{children:(0,a.jsxs)(i.default,{href:"#",onClick:l,children:[null==t?void 0:t.sub_category_name,(0,a.jsx)("input",{type:"checkbox",checked:n,readOnly:!0})]})})}},43022:function(e,t,r){r.d(t,{Uu:function(){return s},_n:function(){return a},n2:function(){return n}});let a="https://vooleyvoo.tgastaging.com",s="AIzaSyC9NuN_f-wESHh3kihTvpbvdrmKlTQurxw",n="pk_test_51PEqRgAJcW6Btw8tpASD0I5XchUNQRd2QPwSCRlxYvm1GvdtCWEik7s6RANFlolXD58002c3HBDItMkrZHIXgs1T00xvdkulZJ"},73685:function(e,t,r){r.d(t,{L:function(){return s}});var a=r(2265);t.Z=function(e,t){let[r,s]=(0,a.useState)(()=>{let r;return r=null,(r=localStorage.getItem(e))?JSON.parse(r):t});return(0,a.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(r))},[e,r]),[r,s]};let s=e=>{localStorage.removeItem(e)}},50391:function(e,t,r){r.d(t,{Fh:function(){return l},Gw:function(){return i},Nh:function(){return c},qC:function(){return n},rS:function(){return o}}),r(7261);var a=r(43022);let s=e=>{let t=new FormData;return Object.keys(e).forEach(r=>t.append(r,e[r])),t},n=async e=>{let{data:t,endpoint:r}=e;try{let e=await fetch("".concat(a._n,"/api/").concat(r),{method:"POST",body:s(t)}),n=await e.json();if(n.success)return n.data;if(!n.success)return n.message;if(n.error)throw n.error}catch(e){return e}},o=async e=>{let{data:t,endpoint:r}=e;try{let e=await fetch("".concat(a._n,"/api/").concat(r),{method:"POST",body:s(t)}),n=await e.json();if(n.success)return n.data[0];if(!n.success)return n.message;if(n.error)throw n.error}catch(e){return e}},i=async e=>{let{data:t,endpoint:r,authToken:n}=e;try{let e=await fetch("".concat(a._n,"/api/").concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:s(t)}),o=await e.json();if(o.success)return o.data[0];if(!o.success)throw o.message;if(o.error)throw o.error}catch(e){return e}},l=async e=>{let{data:t,endpoint:r,authToken:n}=e;try{let e=await fetch("".concat(a._n,"/api/auth/").concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:s(t)}),o=await e.json();if(o.success)return o;if(!o.success)throw o.message;if(o.error)throw o.error}catch(e){return e}},c=async e=>{let{data:t,endpoint:r,authToken:s}=e;try{let e=await fetch("".concat(a._n,"/api/auth/").concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(n.success)return n;if(!n.success)throw n.message;if(n.error)throw n.error}catch(e){return e}}},906:function(e,t,r){r.d(t,{PR:function(){return i},Q_:function(){return o}});let a=(0,r(1455).oM)({name:"user",initialState:{userInfo:null,userState:!1,categoryId:null},reducers:{setUserInfo:(e,t)=>{e.userInfo=t.payload},setUserState:e=>{e.userState=!e.userState},setCategory:(e,t)=>{e.categoryId=t.payload},clearUser:e=>{e.userInfo=null,e.aiQuestionId=null}}}),{setUserInfo:s,clearUser:n,setUserState:o,setCategory:i}=a.actions;t.ZP=a.reducer}}]);