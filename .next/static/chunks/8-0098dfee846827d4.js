"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{90008:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=a(57437),s=a(43022),i=a(73685),l=a(50391),n=a(33145),o=a(2265),u=a(29501),d=a(7261),c=a(8586),h=e=>{let{register:t,edit:a=!0,errors:i,onSelectPlace:l,defaultValue:o}=e,{onChange:u,onBlur:d,name:h,value:f}=t,{ref:m}=(0,c.usePlacesWidget)({apiKey:s.Uu,onPlaceSelected:l});return(0,r.jsxs)("div",{className:"user-label",children:[(0,r.jsx)("div",{className:"user-label-icon",children:(0,r.jsx)(n.default,{width:25,height:25,src:"/images/user-dashboard/my-profile/icons/4.svg",alt:""})}),(0,r.jsx)("input",{ref:m,value:f,onChange:u,name:h,type:"text",autoComplete:"off",style:{border:i.address?"1px solid red":""},readOnly:a,disabled:a,onBlur:d,placeholder:"Address",defaultValue:o})]})},f=a(14692),m=a(68575),p=()=>{let[e,t]=(0,o.useState)(!0),[a,c]=(0,o.useState)(!1),[p,g]=(0,o.useState)("");console.log(p,"askdfjjkasfhjkshfsg");let{isAuthenticated:v,userDetails:y,login:_}=(0,f.a)(),[x,j]=(0,o.useState)(""),{userInfo:b}=(0,m.v9)(e=>e.user),[w,S]=(0,i.Z)("loginUser",null);console.log(y,"user authrization check");let{register:k,handleSubmit:N,setValue:P,formState:{errors:I},getValues:C}=(0,u.cI)();(0,o.useEffect)(()=>{!async function(){try{var e;let t=await (0,l.Fh)({data:{user_id:null==y?void 0:y.user_id},endpoint:"user_get_profile",authToken:w.token}),a=null==t?void 0:t.data;console.log(a,"profile get api"),(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.user_signup_status)=="1"&&(P("email",t.data.email),P("name",t.data.name),P("phone",t.data.phone),P("address",t.data.location),P("latitude",t.data.latitude),P("longitude",t.data.longitude),g(t.data.profile_image))}catch(e){d.toast.error("".concat(e))}}()},[v,a]);let A=async e=>{try{let r={name:e.name,email:e.email,phone:e.phone,user_id:y.user_id,location:e.address,latitude:e.latitude,longitude:e.longitude};e.profile_image&&e.profile_image[0]&&"object"==typeof e.profile_image[0]?r.profile_image=e.profile_image[0]:r.profile_image="",console.log(r,"formData is thissss");let s=await (0,l.Fh)({data:r,endpoint:"user_update_profile",authToken:w.token}),i=null==s?void 0:s.data[0];if(console.log(i,"profile update response"),s){c(!a),d.toast.success(s.message),t(!0);let e={token:w.token,email:i.email,user_details:[{user_id:i.id,token:w.token,login_type:i.login_type,name:i.name,profile_image:i.profile_image,user_signup_status:i.user_signup_status}]};_(e)}else throw s}catch(t){let e="string"==typeof t?"".concat(t):(null==t?void 0:t.message)?null==t?void 0:t.message:"".concat(t);d.toast.error(e)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"user-dashboard-data",children:(0,r.jsxs)("div",{className:"user-my-profile",children:[(0,r.jsx)("h1",{children:"My Profile"}),(0,r.jsxs)("form",{onSubmit:N(A),children:[(0,r.jsxs)("div",{className:"user-pro-in",children:[(0,r.jsx)("div",{className:"user-image",children:(0,r.jsx)(n.default,{width:96,height:96,style:{borderRadius:999},src:x||(p?"".concat(s._n).concat(p):"/images/user-dashboard/my-profile/profile.png"),alt:""})}),!e&&(0,r.jsxs)("label",{className:"user-upload-icon",children:[(0,r.jsx)(n.default,{width:19,height:14,src:"/images/user-dashboard/my-profile/upload.svg",alt:""}),(0,r.jsx)("input",{type:"file",id:"profile_image",hidden:!0,onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=()=>{j(null==e?void 0:e.result)},e.readAsDataURL(t)}P("profile_image",e.target.files)}})]})]}),(0,r.jsxs)("div",{className:"user-label",children:[(0,r.jsx)("div",{className:"user-label-icon",children:(0,r.jsx)(n.default,{width:25,height:25,src:"/images/user-dashboard/my-profile/icons/1.svg",alt:""})}),(0,r.jsx)("input",{...k("name",{required:{value:!0,message:"Name is required"}}),type:"text",style:{border:I.name?"1px solid red":""},readOnly:e,placeholder:"Full Name"})]}),(0,r.jsxs)("div",{className:"user-label",children:[(0,r.jsx)("div",{className:"user-label-icon",children:(0,r.jsx)(n.default,{width:25,height:25,src:"/images/user-dashboard/my-profile/icons/2.svg",alt:""})}),(0,r.jsx)("input",{...k("email",{required:{value:!0,message:"Email is required"},pattern:{value:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Invalid email address"}}),type:"text",style:{border:I.email?"1px solid red":""},readOnly:e||(null==y?void 0:y.login_type)==="email",placeholder:"Email"})]}),(0,r.jsxs)("div",{className:"user-label",children:[(0,r.jsx)("div",{className:"user-label-icon",children:(0,r.jsx)(n.default,{width:25,height:25,src:"/images/user-dashboard/my-profile/icons/3.svg",alt:""})}),(0,r.jsx)("input",{...k("phone",{required:{value:!0,message:"Number is required"},minLength:10,pattern:/[0-9]/}),type:"text",maxLength:10,style:{border:I.phone?"1px solid red":""},readOnly:e||(null==y?void 0:y.login_type)==="phone",placeholder:"Phone number"})]}),(0,r.jsx)(h,{defaultValue:C("address"),edit:e,register:k("address"),errors:I,onSelectPlace:(e,t)=>{P("address",t.value),P("latitude",e.geometry.location.lat()),P("longitude",e.geometry.location.lng())}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"hidden",id:"latitude",...k("latitude")}),(0,r.jsx)("input",{type:"hidden",id:"longitude",...k("longitude")})]}),(0,r.jsxs)("div",{className:"user-label-btn",children:[(0,r.jsx)("input",{onClick:()=>t(!1),type:"button",value:"Edit"}),(0,r.jsx)("input",{type:"submit",value:"Save"})]})]})]})})})}},14692:function(e,t,a){a.d(t,{default:function(){return c},a:function(){return h}});var r=a(57437),s=a(2265),i=a(68575),l=a(1455),n=a(906);let o=(0,l.xC)({reducer:{user:n.ZP}});var u=a(73685);let d=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[a,l]=(0,s.useState)(!1),[n,c]=(0,s.useState)({user_id:null,name:"",profile_image:""}),[h,f]=(0,u.Z)("loginUser",null);(0,s.useEffect)(()=>{!async function(){var e;(null==h?void 0:h.token)&&(null==h?void 0:null===(e=h.user_details)||void 0===e?void 0:e.user_id)&&(l(!0),c(null==h?void 0:h.user_details))}()},[]);let m=async()=>{await (0,u.L)("loginUser"),l(!1)};return(0,r.jsx)(i.zt,{store:o,children:(0,r.jsx)(d.Provider,{value:{isAuthenticated:a,login:e=>{console.log(e,"comes from dispatch"),l(!0);let t={token:e.token,user_details:{token:e.token,email:e.email||"",user_id:e.user_id||"",...null==e?void 0:e.user_details[0]}};f(t),c(null==t?void 0:t.user_details)},logout:m,userDetails:n},children:t})})}let h=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},43022:function(e,t,a){a.d(t,{Uu:function(){return s},_n:function(){return r},n2:function(){return i}});let r="https://vooleyvoo.tgastaging.com",s="AIzaSyC9NuN_f-wESHh3kihTvpbvdrmKlTQurxw",i="pk_test_51PEqRgAJcW6Btw8tpASD0I5XchUNQRd2QPwSCRlxYvm1GvdtCWEik7s6RANFlolXD58002c3HBDItMkrZHIXgs1T00xvdkulZJ"},73685:function(e,t,a){a.d(t,{L:function(){return s}});var r=a(2265);t.Z=function(e,t){let[a,s]=(0,r.useState)(()=>{let a;return a=null,(a=localStorage.getItem(e))?JSON.parse(a):t});return(0,r.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(a))},[e,a]),[a,s]};let s=e=>{localStorage.removeItem(e)}},50391:function(e,t,a){a.d(t,{Fh:function(){return o},Gw:function(){return n},Nh:function(){return u},qC:function(){return i},rS:function(){return l}}),a(7261);var r=a(43022);let s=e=>{let t=new FormData;return Object.keys(e).forEach(a=>t.append(a,e[a])),t},i=async e=>{let{data:t,endpoint:a}=e;try{let e=await fetch("".concat(r._n,"/api/").concat(a),{method:"POST",body:s(t)}),i=await e.json();if(i.success)return i.data;if(!i.success)return i.message;if(i.error)throw i.error}catch(e){return e}},l=async e=>{let{data:t,endpoint:a}=e;try{let e=await fetch("".concat(r._n,"/api/").concat(a),{method:"POST",body:s(t)}),i=await e.json();if(i.success)return i.data[0];if(!i.success)return i.message;if(i.error)throw i.error}catch(e){return e}},n=async e=>{let{data:t,endpoint:a,authToken:i}=e;try{let e=await fetch("".concat(r._n,"/api/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:s(t)}),l=await e.json();if(l.success)return l.data[0];if(!l.success)throw l.message;if(l.error)throw l.error}catch(e){return e}},o=async e=>{let{data:t,endpoint:a,authToken:i}=e;try{let e=await fetch("".concat(r._n,"/api/auth/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:s(t)}),l=await e.json();if(l.success)return l;if(!l.success)throw l.message;if(l.error)throw l.error}catch(e){return e}},u=async e=>{let{data:t,endpoint:a,authToken:s}=e;try{let e=await fetch("".concat(r._n,"/api/auth/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await e.json();if(i.success)return i;if(!i.success)throw i.message;if(i.error)throw i.error}catch(e){return e}}},906:function(e,t,a){a.d(t,{PR:function(){return n},Q_:function(){return l}});let r=(0,a(1455).oM)({name:"user",initialState:{userInfo:null,userState:!1,categoryId:null},reducers:{setUserInfo:(e,t)=>{e.userInfo=t.payload},setUserState:e=>{e.userState=!e.userState},setCategory:(e,t)=>{e.categoryId=t.payload},clearUser:e=>{e.userInfo=null,e.aiQuestionId=null}}}),{setUserInfo:s,clearUser:i,setUserState:l,setCategory:n}=r.actions;t.ZP=r.reducer}}]);