(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7139],{62507:function(e,t,n){Promise.resolve().then(n.bind(n,9106))},27648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var i=n(72972),r=n.n(i)},9106:function(e,t,n){"use strict";n.r(t);var i=n(57437),r=n(14692),s=n(38696),a=n(43022),o=n(33145);n(95106);var l=n(27648),u=n(2265),c=n(47240),d=n(83464),f=n(35821);async function h(e,t){let n=new FormData;n.append("user_id",e);let i=await fetch("".concat(a._n,"/api/auth/user_favorite_business_get"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n}),r=await i.json();if(!i.ok)throw Error("Failed to fetch data");return{favoriteList:r.data}}t.default=()=>{let{userDetails:e}=(0,r.a)(),[t,n]=(0,u.useState)(!0),[v,m]=(0,u.useState)({favoriteList:[]}),[g,x]=(0,u.useState)(null),[p,b]=(0,u.useState)(1),[_,j]=(0,u.useState)([]),k=(0,u.useRef)(null),[y,N]=(0,u.useState)(!0),[w,S]=(0,u.useState)({});(0,u.useEffect)(()=>{S(_.reduce((e,t)=>(e[t.business_id]=!0,e),{}))},[_]);let I=async t=>{let n=new FormData;n.append("user_id",e.user_id),n.append("business_id",t),n.append("like_status","0");try{await d.Z.post("".concat(a._n,"/api/auth/user_favorite_business"),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e.token)}}),S(e=>({...e,[t]:!1})),N(e=>!e)}catch(e){console.error("Error updating like status:",e)}};return((0,u.useEffect)(()=>{(async()=>{if(!e||!e.user_id){n(!1);return}try{let t=await h(e.user_id,null==e?void 0:e.token);m(t),j(t.favoriteList.slice(0,9))}catch(e){x(e.message||"An error occurred")}finally{n(!1)}})()},[e,y]),t)?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(s.Z,{loading:t})}):g?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)("p",{children:g})}):v.favoriteList.length?(0,i.jsxs)("div",{className:"user-dashboard-data",ref:k,children:[(0,i.jsx)("div",{className:"user-my-favorites",children:(0,i.jsx)("h1",{children:"My Favorites"})}),(0,i.jsxs)("div",{className:"user-my-favorites-inner",children:[_.map((e,t)=>{var n,r,s,u,c,d;return console.log(e,"businessbusinessbusiness"),(0,i.jsxs)("div",{className:"event-brand-box",children:[(0,i.jsxs)("div",{className:"brand-logo",children:[(0,i.jsxs)("div",{className:"brand-heart",children:[(0,i.jsx)("input",{type:"checkbox",id:"favorite-".concat(e.business_id),checked:!0===w[e.business_id],onChange:()=>I(null==e?void 0:e.business_id),"aria-label":"Favorite ".concat(e.name)}),(0,i.jsx)("label",{htmlFor:"favorite-".concat(e.business_id),children:(0,i.jsx)("img",{src:!0===w[e.business_id]?"/images/user-bookmark-2.png":"/images/user-bookmark.png",alt:"Bookmark",width:25,height:23})})]}),(0,i.jsx)(o.default,{width:285,height:223,src:(null===(n=e.business_favourite)||void 0===n?void 0:n.profile_image)?a._n+(null===(r=e.business_favourite)||void 0===r?void 0:r.profile_image):"/images/near-event3.png",alt:e.name})]}),(0,i.jsxs)("div",{className:"event-pad",children:[(0,i.jsx)("h6",{children:null===(s=e.business_favourite)||void 0===s?void 0:s.name}),(0,i.jsx)("p",{children:(0,f.hk)(null==e?void 0:null===(u=e.business_favourite)||void 0===u?void 0:u.business_favourite,10)}),(0,i.jsxs)("div",{className:"point-icon",children:[(0,i.jsxs)("span",{children:[" ",(0,i.jsx)(o.default,{width:20,height:20,src:"/images/location-dot.png",alt:""})," ",(null==e?void 0:e.distance)||0," miles away"," "]}),(0,i.jsx)("span",{children:(0,i.jsx)(o.default,{width:20,height:20,src:"/images/calendar.png",alt:""})}),(null==e?void 0:null===(c=e.business_favourite)||void 0===c?void 0:c.location)&&(0,i.jsxs)("span",{children:[(0,i.jsx)(o.default,{width:20,height:20,src:"/images/loc-mark.svg",alt:""})," ",null==e?void 0:null===(d=e.business_favourite)||void 0===d?void 0:d.location," "]})]}),(0,i.jsx)(l.default,{className:"btn btn-viewmore-border ",href:"/businesses/".concat(null==e?void 0:e.business_id,"?business_id=").concat(null==e?void 0:e.business_id),role:"button",children:"View More"})]})]},e.id+t)}),(0,i.jsx)(c.Z,{dataArray:v.favoriteList,pageNo:p,clickPageNumber:e=>{let t=(e-1)*9,n=v.favoriteList.slice(t,t+9);k.current&&k.current.scrollIntoView({behavior:"smooth",block:"start"}),b(e),j(n)},pageLimit:9})]})]}):(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,i.jsx)("p",{style:{fontSize:30},children:"No favorites found."})})}},14692:function(e,t,n){"use strict";n.d(t,{default:function(){return d},a:function(){return f}});var i=n(57437),r=n(2265),s=n(68575),a=n(1455),o=n(906);let l=(0,a.xC)({reducer:{user:o.ZP}});var u=n(73685);let c=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[n,a]=(0,r.useState)(!1),[o,d]=(0,r.useState)({user_id:null,name:"",profile_image:""}),[f,h]=(0,u.Z)("loginUser",null);(0,r.useEffect)(()=>{!async function(){var e;(null==f?void 0:f.token)&&(null==f?void 0:null===(e=f.user_details)||void 0===e?void 0:e.user_id)&&(a(!0),d(null==f?void 0:f.user_details))}()},[]);let v=async()=>{await (0,u.L)("loginUser"),a(!1)};return(0,i.jsx)(s.zt,{store:l,children:(0,i.jsx)(c.Provider,{value:{isAuthenticated:n,login:e=>{console.log(e,"comes from dispatch"),a(!0);let t={token:e.token,user_details:{token:e.token,email:e.email||"",user_id:e.user_id||"",...null==e?void 0:e.user_details[0]}};h(t),d(null==t?void 0:t.user_details)},logout:v,userDetails:o},children:t})})}let f=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},47240:function(e,t,n){"use strict";var i=n(57437),r=n(2265);t.Z=e=>{let{dataArray:t=[],clickPageNumber:n,pageNo:s,pageLimit:a=9}=e,o=Math.ceil((null==t?void 0:t.length)/a),[l,u]=(0,r.useState)(1);(0,r.useEffect)(()=>{u(s)},[s]);let c=e=>{n(e),u(e)};return(0,i.jsx)("div",{children:o>1&&(0,i.jsx)("div",{className:"col-lg-12 text-center",children:(0,i.jsx)("nav",{className:"pagingation-style",children:(0,i.jsxs)("ul",{className:"pagination",children:[(0,i.jsx)("li",{className:"page-item",children:(0,i.jsx)("a",{className:"page-link",onClick:()=>1!==l&&c(l-1),style:{cursor:"pointer"},children:"Prev"})}),(()=>{let e=[];for(let t=1;t<=o;t++)e.push((0,i.jsx)("li",{className:"page-item",children:(0,i.jsx)("a",{className:"page-link",onClick:()=>c(t),style:{cursor:"pointer",color:l===t?"#FFF":"inherit",backgroundColor:l===t?"#F10027":"inherit"},children:t})},t));return e})(),(0,i.jsx)("li",{className:"page-item",children:(0,i.jsx)("a",{className:"page-link",onClick:()=>l!==o&&c(l+1),style:{cursor:"pointer"},children:"Next"})})]})})})})}},38696:function(e,t,n){"use strict";var i=n(57437),r=n(29),s=n.n(r);n(2265);var a=n(4229),o=n.n(a);t.Z=e=>{let{loading:t}=e;return(0,i.jsxs)("div",{className:"jsx-37cb8f3f1de06620 loader",children:[(0,i.jsx)(o(),{color:"#3498db",size:100,loading:t}),(0,i.jsx)("p",{className:"jsx-37cb8f3f1de06620",children:"Loading..."}),(0,i.jsx)(s(),{id:"37cb8f3f1de06620",children:".loader.jsx-37cb8f3f1de06620{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:100vh;font-size:1.5rem}"})]})}},43022:function(e,t,n){"use strict";n.d(t,{Uu:function(){return r},_n:function(){return i},n2:function(){return s}});let i="https://vooleyvoo.tgastaging.com",r="AIzaSyC9NuN_f-wESHh3kihTvpbvdrmKlTQurxw",s="pk_test_51PEqRgAJcW6Btw8tpASD0I5XchUNQRd2QPwSCRlxYvm1GvdtCWEik7s6RANFlolXD58002c3HBDItMkrZHIXgs1T00xvdkulZJ"},73685:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var i=n(2265);t.Z=function(e,t){let[n,r]=(0,i.useState)(()=>{let n;return n=null,(n=localStorage.getItem(e))?JSON.parse(n):t});return(0,i.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(n))},[e,n]),[n,r]};let r=e=>{localStorage.removeItem(e)}},906:function(e,t,n){"use strict";n.d(t,{PR:function(){return o},Q_:function(){return a}});let i=(0,n(1455).oM)({name:"user",initialState:{userInfo:null,userState:!1,categoryId:null},reducers:{setUserInfo:(e,t)=>{e.userInfo=t.payload},setUserState:e=>{e.userState=!e.userState},setCategory:(e,t)=>{e.categoryId=t.payload},clearUser:e=>{e.userInfo=null,e.aiQuestionId=null}}}),{setUserInfo:r,clearUser:s,setUserState:a,setCategory:o}=i.actions;t.ZP=i.reducer},35821:function(e,t,n){"use strict";n.d(t,{Bp:function(){return i},W$:function(){return c},Wu:function(){return r},YZ:function(){return s},hk:function(){return h},hs:function(){return o},j7:function(){return u},r8:function(){return f},rF:function(){return d},vW:function(){return a}});let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];for(let i of e){let e=0;for(let n of t)Number(n.category_id)===Number(i.category_id)&&(e+=1);n.push({...i,count:e})}return n.filter(e=>0!==e.count)},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];for(let i of e)for(let e of t)Number(e.category_id)===Number(i.category_id)&&n.push(i);return n},s=e=>{let[t,n]=e.split(":").map(Number);if(isNaN(t)||t<0||t>23)return"Invalid time format";let i=t>=12?"PM":"AM",r=t%12||12;return!isNaN(n)&&n>=0&&n<=59?"".concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")," ").concat(i):"".concat(String(r).padStart(2,"0"),":").concat(String(0).padStart(2,"0")," ").concat(i)};function a(){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(t=>e(t.coords),e=>t(e))})}function o(e,t){let n=l(e.latitude),i=l(t.longitude),r=l(t.latitude-e.latitude),s=l(t.longitude-e.longitude),a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2);return+(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*3958.754641).toFixed(2)}function l(e){return Math.PI/180*e}function u(e,t,n){let i=new Date(e),r=new Date(t);if(isNaN(i.getTime())||isNaN(r.getTime()))throw Error("Invalid date format");return n.filter(e=>{let t=new Date(e.events_date);return t>=i&&t<=r})}function c(e,t,n,i){let r=new Date(e),s=new Date(t);if(isNaN(r.getTime())||isNaN(s.getTime()))throw Error("Invalid date format");return n.filter(e=>{var t;let n=new Date(null==e?void 0:null===(t=e[i])||void 0===t?void 0:t.events_date);return n>=r&&n<=s})}function d(e,t){return new Date(e.replace(/-/g,"/"))<new Date(t.replace(/-/g,"/"))}function f(e,t,n){return e.filter(e=>{let i=e.event_away_distance;return void 0!==i&&i>=t&&i<=n})}let h=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:""}},function(e){e.O(0,[5878,2519,2972,4085,9840,6434,3464,2971,2117,1744],function(){return e(e.s=62507)}),_N_E=e.O()}]);