(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6763],{42817:function(e,t,a){Promise.resolve().then(a.bind(a,30582))},99376:function(e,t,a){"use strict";var o=a(35475);a.o(o,"useParams")&&a.d(t,{useParams:function(){return o.useParams}}),a.o(o,"usePathname")&&a.d(t,{usePathname:function(){return o.usePathname}}),a.o(o,"useRouter")&&a.d(t,{useRouter:function(){return o.useRouter}}),a.o(o,"useSearchParams")&&a.d(t,{useSearchParams:function(){return o.useSearchParams}})},30582:function(e,t,a){"use strict";var o=a(57437),n=a(2265),r=a(33145);a(30846);var s=a(35821),i=a(95106),l=a(43022),c=a(47240),d=a(55692),u=a(85555),m=a(80956);a(71208);var h=a(7261),f=a(50391),p=a(14692),v=a(27648),y=a(99376),g=a(38696);t.default=e=>{let{categoryMainList:t=[]}=e,{isAuthenticated:a,userDetails:l}=(0,p.a)(),[v,y]=(0,n.useState)(!1),[x,j]=(0,n.useState)([]),[w,_]=(0,n.useState)([]);console.log(x,"voopon list data");let[N,S]=(0,n.useState)([]),[k,M]=(0,n.useState)(1),[P,A]=(0,n.useState)({category_id:"All"}),[C,O]=(0,n.useState)({isCategoryApply:!1,isSearchApply:!1,isDateRangeApply:!1,isLoacationApply:!1,isMilesAppy:!1,isPaginationApply:!1}),[z,F]=(0,n.useState)([]),[E,L]=(0,n.useState)([]),[T,D]=(0,n.useState)(""),[V,R]=(0,n.useState)([]);console.log("location filter entererd data ",V),console.log(z,"hello renderlist data");let[Z,B]=(0,n.useState)({from:0,to:100}),[I,J]=(0,n.useState)(!1);(0,n.useEffect)(()=>{q()},[t,l]);let q=async()=>{try{var e,t;J(!0);let a=await (0,f.Fh)({data:{user_id:null==l?void 0:l.user_id},endpoint:"user_my_voopon_list",authToken:l.token});console.log(a,"result Voopon data");let o=[...null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.voopon_one,...null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.voopon_two];j(o),F(o),o.length>0?j(o):j([])}catch(t){let e="string"==typeof t?"".concat(t):(null==t?void 0:t.message)?null==t?void 0:t.message:"".concat(t);h.toast.error(e),j([])}finally{J(!1)}};w.sort((e,t)=>e.category_name<t.category_name?-1:e.category_name>t.category_name?1:0);let G=e=>{let t=(0,s.vW)();F(x.filter(a=>{let o={latitude:a.latitude,longitude:a.longitude},n=(0,s.hs)(t,o);return n>=e.from&&n<=e.to}))},W=e=>{if(e&&2===e.length){let[t,a]=e.map(e=>i.ou.fromJSDate(new Date(e)).toFormat("yyyy-MM-dd"));F(x.filter(e=>{let o=i.ou.fromFormat(e.voopons_valid_thru,"yyyy-MM-dd");return o>=i.ou.fromISO(t)&&o<=i.ou.fromISO(a)}))}else F(x)},H=e=>{0===e.length?F(x):F(x.filter(t=>e.some(e=>t.location.toLowerCase().includes(e.toLowerCase()))))};return((0,n.useEffect)(()=>{},[x]),(0,n.useEffect)(()=>{x.length>0&&F(x.slice(0,9))},[x]),I)?(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"400px"},children:(0,o.jsx)(g.Z,{loading:I})}):(0,o.jsxs)("div",{className:"user-dashboard-data user-my-eve",children:[(0,o.jsx)("div",{className:"user-my-favorites",children:(0,o.jsx)("div",{className:"deals-inner-search",children:(0,o.jsx)("form",{onSubmit:e=>{e.preventDefault(),F(x.filter(e=>e.voopons_name.toLowerCase().includes(T.toLowerCase())))},children:(0,o.jsxs)("label",{className:"interests-search",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search for Promoters",value:T,onChange:e=>{D(e.target.value)}}),(0,o.jsx)("button",{type:"submit",children:(0,o.jsx)(r.default,{width:20,height:21,src:"/images/search.png",alt:""})})]})})})}),(0,o.jsx)("div",{className:"user-my-voop-eve",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-lg-12 mb-3",children:(0,o.jsxs)("div",{className:"show-cal-loc-range",children:[(0,o.jsx)("div",{className:"calendar",children:(0,o.jsx)("div",{className:"broker-date",children:(0,o.jsx)(m.Z,{date:E,onChange:e=>{L(e),W(e)}})})}),(0,o.jsxs)("div",{className:"location-drop",children:[(0,o.jsxs)("a",{onClick:()=>y(!v),className:"btn btn-location text-left",href:"#",role:"button",children:[" ","Location"," "]}),(0,o.jsx)("div",{className:"location-drop-list",style:{display:v?"block":"none"},children:(0,o.jsx)("form",{children:(0,o.jsx)(u.Z,{select:V,setSelect:e=>{R(e),H(e)}})})})]}),(0,o.jsxs)("div",{className:"dropdown mile-rad-range date-range",children:[(0,o.jsxs)("a",{className:"btn btn-date-range text-left",type:"button",id:"date-range-drop","data-bs-toggle":"dropdown","aria-expanded":"false",children:["Select your Mile Radius"," "]}),(0,o.jsx)(d.Z,{initialValueFrom:0,initialValueTo:100,handleSliderValues:e=>{let t={from:e.fromValue,to:e.toValue};B(t),0===t.from&&100===t.to?(O(e=>({...e,isMilesAppy:!1})),F(x)):(O(e=>({...e,isMilesAppy:!0})),G(t))}})]})]})}),Array.isArray(z)&&z.length>0&&z.map((e,t)=>(0,o.jsx)(b,{item:e},"".concat(null==e?void 0:e.id,"_").concat(t))),Array.isArray(z)&&0===z.length&&(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("p",{className:"noDataText",children:"No Voopons"})}),(0,o.jsx)(c.Z,{dataArray:x,pageNo:k,clickPageNumber:e=>{M(e);let t=(e-1)*9;F(x.slice(t,t+9))},pageLimit:9})]})})]})};let x=(e,t)=>{let a=e.split(" ");return a.length>t?a.slice(0,t).join(" ")+"...":e},b=e=>{var t,a;let{item:s}=e;console.log(s.voopons_date,"item data comes from this****");let c=new Date,d=i.ou.fromFormat(null==s?void 0:s.voopons_valid_thru,"yyyy-MM-dd"),u=(0,y.useRouter)(),m=(0,n.useCallback)(e=>{e.preventDefault(),u.push("/my/voopons/".concat(null==s?void 0:s.category_id,"?match_number=").concat(null==s?void 0:s.match_number))},[s]);return(0,o.jsx)("div",{className:"col-lg-4",children:(0,o.jsxs)("div",{className:"voopan-box",children:[7>Math.round((d-c)/864e5)?(0,o.jsx)("span",{className:"expiring-soon",children:"Expiring soon"}):null,(0,o.jsx)("div",{className:"voopon-logo",children:(0,o.jsx)(r.default,{width:290,height:226,alt:"",style:{objectFit:"cover"},src:(null==s?void 0:null===(t=s.vooponimage)||void 0===t?void 0:t.image_name)?"".concat(l._n,"/").concat(null==s?void 0:null===(a=s.vooponimage)||void 0===a?void 0:a.image_name):"/images/near-event1.png",onError:e=>{e.target.src="/images/near-event.png"}})}),(0,o.jsx)("div",{className:"voopon-heading mynamestyling",children:null==s?void 0:s.voopons_name}),(0,o.jsx)("h5",{children:x(null==s?void 0:s.voopons_description,10)}),(0,o.jsxs)("p",{children:[(0,o.jsx)(r.default,{width:20,height:20,src:"/images/calendar.png",alt:""})," ",i.ou.fromFormat(null==s?void 0:s.voopons_date,"yyyy-MM-dd").toFormat("MMMM dd, yyyy")]}),(0,o.jsx)(v.default,{className:"btn btn-viewmore",href:"#",onClick:m,role:"button",children:"View More"})]})})}},38696:function(e,t,a){"use strict";var o=a(57437),n=a(29),r=a.n(n);a(2265);var s=a(4229),i=a.n(s);t.Z=e=>{let{loading:t}=e;return(0,o.jsxs)("div",{className:"jsx-37cb8f3f1de06620 loader",children:[(0,o.jsx)(i(),{color:"#3498db",size:100,loading:t}),(0,o.jsx)("p",{className:"jsx-37cb8f3f1de06620",children:"Loading..."}),(0,o.jsx)(r(),{id:"37cb8f3f1de06620",children:".loader.jsx-37cb8f3f1de06620{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:100vh;font-size:1.5rem}"})]})}},50391:function(e,t,a){"use strict";a.d(t,{Fh:function(){return l},Gw:function(){return i},Nh:function(){return c},qC:function(){return r},rS:function(){return s}}),a(7261);var o=a(43022);let n=e=>{let t=new FormData;return Object.keys(e).forEach(a=>t.append(a,e[a])),t},r=async e=>{let{data:t,endpoint:a}=e;try{let e=await fetch("".concat(o._n,"/api/").concat(a),{method:"POST",body:n(t)}),r=await e.json();if(r.success)return r.data;if(!r.success)return r.message;if(r.error)throw r.error}catch(e){return e}},s=async e=>{let{data:t,endpoint:a}=e;try{let e=await fetch("".concat(o._n,"/api/").concat(a),{method:"POST",body:n(t)}),r=await e.json();if(r.success)return r.data[0];if(!r.success)return r.message;if(r.error)throw r.error}catch(e){return e}},i=async e=>{let{data:t,endpoint:a,authToken:r}=e;try{let e=await fetch("".concat(o._n,"/api/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:n(t)}),s=await e.json();if(s.success)return s.data[0];if(!s.success)throw s.message;if(s.error)throw s.error}catch(e){return e}},l=async e=>{let{data:t,endpoint:a,authToken:r}=e;try{let e=await fetch("".concat(o._n,"/api/auth/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:n(t)}),s=await e.json();if(s.success)return s;if(!s.success)throw s.message;if(s.error)throw s.error}catch(e){return e}},c=async e=>{let{data:t,endpoint:a,authToken:n}=e;try{let e=await fetch("".concat(o._n,"/api/auth/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await e.json();if(r.success)return r;if(!r.success)throw r.message;if(r.error)throw r.error}catch(e){return e}}}},function(e){e.O(0,[5878,7261,2519,2972,8629,4085,9840,428,846,9506,1208,2971,2117,1744],function(){return e(e.s=42817)}),_N_E=e.O()}]);