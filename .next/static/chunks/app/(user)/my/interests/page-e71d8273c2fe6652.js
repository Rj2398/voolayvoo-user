(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8962],{31721:function(e,t,r){Promise.resolve().then(r.bind(r,16520))},33145:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(48461),s=r.n(a)},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(72972),s=r.n(a)},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},48461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return c},getImageProps:function(){return o}});let a=r(47043),s=r(55346),n=r(65878),i=a._(r(5084));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=n.Image},16520:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(57437),s=r(14692),n=r(50391),i=r(33145),o=r(27648),c=r(99376),u=r(2265),l=r(7261),d=e=>{let{list:t=[],fullwidth:r=!1}=e,[i,d]=(0,u.useState)(""),[y,g]=(0,u.useState)(t);(0,u.useEffect)(()=>{g(t)},[t]),console.log(y,"*****************");let[_,m]=(0,u.useState)([]),{userDetails:b}=(0,s.a)(),v=(0,c.useRouter)();console.log(t,"hello list data comes from");let p=(0,u.useCallback)(e=>{let{value:r}=e.target;d(r),""===r&&g(t)},[t]),j=e=>{e.preventDefault(),i?g(t.filter(e=>null==e?void 0:e.category_name.toLowerCase().includes(i.toLowerCase()))):g(t)},x=(0,u.useCallback)(e=>{m(t=>t.map(t=>({...t,subCategoryArray:null==t?void 0:t.subCategoryArray.filter(t=>!((null==t?void 0:t.sub_category_id)===(null==e?void 0:e.sub_category_id)&&(null==t?void 0:t.sub_category_name)===(null==e?void 0:e.sub_category_name)))})))},[]);(0,u.useEffect)(()=>{let e=t.filter(e=>"Yes"===e.like).map(e=>({category_id:e.category_id,subCategoryArray:e.subcategory.filter(e=>"Yes"===e.like).map(e=>({sub_category_id:e.sub_category_id,sub_category_name:e.sub_category_name}))}));m(t=>[...e])},[t]);let w=async e=>{e.preventDefault();let t=_.filter(e=>e.subCategoryArray.length>0).map(e=>({category_id:e.category_id,sub_category_id:e.subCategoryArray.map(e=>e.sub_category_id).join(",")})),r={user_id:null==b?void 0:b.user_id,selectionList:t};try{let e=await (0,n.Nh)({data:r,endpoint:"user_interest_create",authToken:b.token});if(null==e?void 0:e.success)l.toast.success(null==e?void 0:e.message),v.push("/my/profile/");else throw e}catch(e){l.toast.error("".concat(e))}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"deals-inner-search",children:[(0,a.jsx)("form",{action:"",children:(0,a.jsxs)("label",{htmlFor:"",className:"interests-search",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search for Categories",value:i,onKeyDown:e=>{"Enter"===e.key&&j(e)},onChange:p}),(0,a.jsx)("button",{onClick:j,children:(0,a.jsx)("img",{src:"/images/search.png",alt:"Search"})})]})}),(0,a.jsx)("p",{children:"Sharing your interests would help us curate personalized Voopons & Events for you."})]}),(0,a.jsx)("div",{className:"deals-inner-heading ".concat(r?"w-100":""),children:(0,a.jsx)("h1",{children:"My Interests"})}),(0,a.jsx)("div",{className:"interests-filters ".concat(r?"w-100":""),children:(0,a.jsx)("ul",{children:_.length>0?_.map(e=>{var t;return(null==e?void 0:null===(t=e.subCategoryArray)||void 0===t?void 0:t.length)>0?e.subCategoryArray.map(e=>(0,a.jsx)(f,{subCat:e,removeTab:x},e.sub_category_id)):null}):(0,a.jsx)("p",{children:"No interests selected yet."})})}),(0,a.jsxs)("div",{className:"interests-list",children:[y.length>0&&y.map(e=>(0,a.jsx)(h,{item:e,setSelectionList:m,selectionList:_},"cat"+(null==e?void 0:e.category_id))),t.filter(e=>"Yes"===e.like&&!y.some(t=>t.category_id===e.category_id)).map(e=>(0,a.jsx)(h,{item:e,setSelectionList:m,selectionList:_},"likeCat"+(null==e?void 0:e.category_id)))]}),(0,a.jsx)("div",{className:"interest-btn",children:(0,a.jsx)(o.default,{href:"#",onClick:w,children:"SUBMIT"})})]})};let f=e=>{let{subCat:t,removeTab:r}=e,s=(0,u.useCallback)(e=>{e.preventDefault(),r(t)},[r,t]);return(0,a.jsxs)("li",{children:[t.sub_category_name,(0,a.jsx)(o.default,{href:"#",onClick:s,children:(0,a.jsx)(i.default,{src:"/images/interests/icons_cross.png",alt:"cross",width:15,height:15})})]})},h=e=>{let{item:t,setSelectionList:r,selectionList:s}=e;console.log(s,"set selection list data"),console.log(t,"item data from category list");let[n,i]=(0,u.useState)(!0),o=(0,u.useCallback)(()=>{i(e=>!e)},[]),c=(0,u.useCallback)(e=>{r(r=>{let a=r.findIndex(e=>e.category_id===t.category_id);if(-1===a)return[...r,{category_id:t.category_id,subCategoryArray:[e]}];if(-1===r[a].subCategoryArray.findIndex(t=>t.sub_category_id===e.sub_category_id))return r.map((t,r)=>r===a?{...t,subCategoryArray:[...t.subCategoryArray,e]}:t);{let t=r[a].subCategoryArray.filter(t=>t.sub_category_id!==e.sub_category_id);return 0===t.length?r.filter((e,t)=>t!==a):r.map((e,r)=>r===a?{...e,subCategoryArray:t}:e)}})},[t,r]);return(0,a.jsxs)("div",{className:"deal-search-filter",children:[(0,a.jsx)("div",{onClick:o,children:(0,a.jsxs)("h2",{children:[t.category_name," ",(0,a.jsx)("i",{className:"fas fa-chevron-down ".concat(n?"down-side":"")})]})}),n&&(0,a.jsx)("div",{className:"deal-search-filter-list",children:(0,a.jsx)("ul",{className:"deal-search-filter-list-scroll",children:t.subcategory.map(e=>(0,a.jsx)(y,{subItem:e,handleSelection:c,selectionList:s},e.sub_category_id))})})]})},y=e=>{let{subItem:t,handleSelection:r,selectionList:s}=e,[n,i]=(0,u.useState)(!1),c=(0,u.useCallback)(e=>{e.preventDefault(),r(t)},[r,t]);return(0,u.useEffect)(()=>{i(s.some(e=>e.subCategoryArray.some(e=>e.sub_category_id===t.sub_category_id)))},[t,s]),(0,a.jsx)("li",{children:(0,a.jsxs)(o.default,{href:"#",onClick:c,children:[null==t?void 0:t.sub_category_name,(0,a.jsx)("input",{type:"checkbox",checked:n,readOnly:!0})]})})};var g=r(43022);async function _(e){var t;let r=new FormData;r.append("user_id",e);let a=await fetch("".concat(g._n,"/api/user_category_sub_category_mobile"),{method:"POST",body:r}),s=await a.json(),n={};if(null===(t=s.data)||void 0===t||t.forEach(e=>{n[e.id]||(n[e.id]={category_id:e.id,category_name:e.category_name,like:e.like,subcategory:[]}),e.sub_category.forEach(t=>{n[e.id].subcategory.push({sub_category_id:t.id,sub_category_name:t.sub_category_name,like:t.like})})}),!a.ok)throw Error("Failed to fetch data");return{list:Object.values(n)}}var m=()=>{let{userDetails:e}=(0,s.a)(),[t,r]=(0,u.useState)({list:[]});return(0,u.useEffect)(()=>{(async()=>{if(e&&e.user_id)try{let t=await _(e.user_id);r(t)}catch(e){}finally{}})()},[e]),(0,a.jsx)("div",{className:"user-dashboard-data",children:(0,a.jsx)("div",{className:"user-inrest",children:(0,a.jsxs)("div",{className:"deals-inner interests-inner p-0",children:[(0,a.jsx)("h1",{className:"text-center mr-0 mb-4",children:"My Interests"}),(0,a.jsx)(d,{list:t.list,fullwidth:!0})]})})})}},14692:function(e,t,r){"use strict";r.d(t,{default:function(){return d},a:function(){return f}});var a=r(57437),s=r(2265),n=r(68575),i=r(1455),o=r(906);let c=(0,i.xC)({reducer:{user:o.ZP}});var u=r(73685);let l=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)({user_id:null,name:"",profile_image:""}),[f,h]=(0,u.Z)("loginUser",null);(0,s.useEffect)(()=>{!async function(){var e;(null==f?void 0:f.token)&&(null==f?void 0:null===(e=f.user_details)||void 0===e?void 0:e.user_id)&&(i(!0),d(null==f?void 0:f.user_details))}()},[]);let y=async()=>{await (0,u.L)("loginUser"),i(!1)};return(0,a.jsx)(n.zt,{store:c,children:(0,a.jsx)(l.Provider,{value:{isAuthenticated:r,login:e=>{console.log(e,"comes from dispatch"),i(!0);let t={token:e.token,user_details:{token:e.token,email:e.email||"",user_id:e.user_id||"",...null==e?void 0:e.user_details[0]}};h(t),d(null==t?void 0:t.user_details)},logout:y,userDetails:o},children:t})})}let f=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},43022:function(e,t,r){"use strict";r.d(t,{Uu:function(){return s},_n:function(){return a},n2:function(){return n}});let a="https://vooleyvoo.tgastaging.com",s="AIzaSyC9NuN_f-wESHh3kihTvpbvdrmKlTQurxw",n="pk_test_51PEqRgAJcW6Btw8tpASD0I5XchUNQRd2QPwSCRlxYvm1GvdtCWEik7s6RANFlolXD58002c3HBDItMkrZHIXgs1T00xvdkulZJ"},73685:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var a=r(2265);t.Z=function(e,t){let[r,s]=(0,a.useState)(()=>{let r;return r=null,(r=localStorage.getItem(e))?JSON.parse(r):t});return(0,a.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(r))},[e,r]),[r,s]};let s=e=>{localStorage.removeItem(e)}},50391:function(e,t,r){"use strict";r.d(t,{Fh:function(){return c},Gw:function(){return o},Nh:function(){return u},qC:function(){return n},rS:function(){return i}}),r(7261);var a=r(43022);let s=e=>{let t=new FormData;return Object.keys(e).forEach(r=>t.append(r,e[r])),t},n=async e=>{let{data:t,endpoint:r}=e;try{let e=await fetch("".concat(a._n,"/api/").concat(r),{method:"POST",body:s(t)}),n=await e.json();if(n.success)return n.data;if(!n.success)return n.message;if(n.error)throw n.error}catch(e){return e}},i=async e=>{let{data:t,endpoint:r}=e;try{let e=await fetch("".concat(a._n,"/api/").concat(r),{method:"POST",body:s(t)}),n=await e.json();if(n.success)return n.data[0];if(!n.success)return n.message;if(n.error)throw n.error}catch(e){return e}},o=async e=>{let{data:t,endpoint:r,authToken:n}=e;try{let e=await fetch("".concat(a._n,"/api/").concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:s(t)}),i=await e.json();if(i.success)return i.data[0];if(!i.success)throw i.message;if(i.error)throw i.error}catch(e){return e}},c=async e=>{let{data:t,endpoint:r,authToken:n}=e;try{let e=await fetch("".concat(a._n,"/api/auth/").concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:s(t)}),i=await e.json();if(i.success)return i;if(!i.success)throw i.message;if(i.error)throw i.error}catch(e){return e}},u=async e=>{let{data:t,endpoint:r,authToken:s}=e;try{let e=await fetch("".concat(a._n,"/api/auth/").concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(n.success)return n;if(!n.success)throw n.message;if(n.error)throw n.error}catch(e){return e}}},906:function(e,t,r){"use strict";r.d(t,{PR:function(){return o},Q_:function(){return i}});let a=(0,r(1455).oM)({name:"user",initialState:{userInfo:null,userState:!1,categoryId:null},reducers:{setUserInfo:(e,t)=>{e.userInfo=t.payload},setUserState:e=>{e.userState=!e.userState},setCategory:(e,t)=>{e.categoryId=t.payload},clearUser:e=>{e.userInfo=null,e.aiQuestionId=null}}}),{setUserInfo:s,clearUser:n,setUserState:i,setCategory:o}=a.actions;t.ZP=a.reducer}},function(e){e.O(0,[5878,7261,2519,2972,2971,2117,1744],function(){return e(e.s=31721)}),_N_E=e.O()}]);