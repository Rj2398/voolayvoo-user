"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1208],{71208:function(e,t,l){var a=l(57437),o=l(2265),s=l(27648),n=l(33145),i=l(30846),r=l(35821),c=l(95106),d=l(43022),u=l(47240),p=l(55692),h=l(85555),m=l(26343),g=l(80956);t.Z=e=>{let{categoryList:t,voopanList:l}=e;console.log(t,"categary list data ");let[v,f]=(0,o.useState)(!1);console.log(v,"location filter data");let[y,x]=(0,o.useState)([]),[N,j]=(0,o.useState)(1),[w,b]=(0,o.useState)({category_id:"All"}),[A,_]=(0,o.useState)({isCategoryApply:!1,isSearchApply:!1,isDateRangeApply:!1,isLoacationApply:!1,isMilesAppy:!1,isPaginationApply:!1}),[S,V]=(0,o.useState)([]);console.log(S,"hello render list of voopans");let[k,M]=(0,o.useState)([]),[C,D]=(0,o.useState)(""),[T,F]=(0,o.useState)([]),[W,E]=(0,o.useState)({from:0,to:100}),I=(0,o.useRef)(null);(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,r.vW)();if(t&&l&&e){for(let t in l){let a={latitude:l[t].latitude,longitude:l[t].longitude};l[t].voopan_away_distance=(0,r.hs)(e,a)}let a=(0,r.Wu)(l,t);x(a),a.length>9?_(e=>({...e,isPaginationApply:!0})):V(a)}}catch(e){console.error("Error getting current location:",e)}})()},[t,l]),(0,o.useEffect)(()=>{let e=(0,r.Wu)(l,t);if(A.isCategoryApply?e=(0,r.Wu)(e,[{category_id:Number(w.category_id)}]):A.isCategoryApply||(e=(0,r.Wu)(e,t)),A.isSearchApply){let t=e.filter(e=>{var t;return null==e?void 0:null===(t=e.voopons_name.toLowerCase())||void 0===t?void 0:t.includes(C.toLowerCase())});x(t),e=t}else A.isSearchApply||(e=(0,r.Wu)(e,t));if(A.isDateRangeApply){let t=new i.NT(k[0]),l=new i.NT(k[1]);(0,r.rF)(t.format(),l.format())&&x(e=(0,m.Gq)(t.format(),l.format(),e))}else A.isDateRangeApply||(e=(0,r.Wu)(e,t));if(T.length>0){let t=e.filter(e=>{var t;return((null==e?void 0:null===(t=e.location)||void 0===t?void 0:t.split(", "))||[]).some(e=>T.some(t=>e.includes(t)))});x(t),e=t}else T.length;A.isMilesAppy?x(e=(0,m.Fh)(e,W.from,W.to)):A.isMilesAppy||(e=(0,r.Wu)(e,t)),e.length>9&&A.isPaginationApply&&(x(e),e=e.filter((e,t)=>t<9)),j(1),V(e)},[A,T]);let R=(e,t)=>{let l=e.split(" ");return l.length>t?l.slice(0,t).join(" ")+"...":e},L={height:"420Px"};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"row justify-content-center p-3",children:(0,a.jsx)("div",{className:"col-lg-6",children:(0,a.jsxs)("form",{className:"d-flex new-srchbox mb-3",onSubmit:e=>{e.preventDefault(),C?_(e=>({...e,isSearchApply:!0})):_(e=>({...e,isSearchApply:!1})),I.current&&I.current.scrollIntoView({behavior:"smooth",block:"start"})},children:[(0,a.jsx)("input",{className:"new-srch",type:"search",placeholder:"Search for Voopons","aria-label":"Search",value:C,onChange:e=>{e.target.value?D(e.target.value):(D(e.target.value),_(e=>({...e,isSearchApply:!1})))}}),(0,a.jsx)("button",{className:"srch-btn",type:"submit",children:(0,a.jsx)(n.default,{width:15,height:16,src:"/images/search.png",alt:""})})]})})}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,a.jsxs)("div",{className:"row",ref:I,children:[(0,a.jsx)("div",{className:"col-lg-12 mb-3",children:(0,a.jsxs)("div",{className:"show-cal-loc-range",children:[(0,a.jsx)("div",{className:"calendar",children:(0,a.jsx)("div",{className:"broker-date",onClick:()=>f(!1),children:(0,a.jsx)(g.Z,{date:k,onChange:e=>{let t=new i.NT(e[0]),l=new i.NT(e[1]);M(e),(0,r.rF)(t.format(),l.format())?_(e=>({...e,isDateRangeApply:!0})):_(e=>({...e,isDateRangeApply:!1})),I.current&&I.current.scrollIntoView({behavior:"smooth",block:"start"})}})})}),(0,a.jsxs)("div",{className:"location-drop",children:[(0,a.jsxs)("a",{onClick:()=>f(!v),className:"btn btn-location text-left",role:"button",children:[" ","Location"," "]}),(0,a.jsx)("div",{className:"location-drop-list",style:{display:v?"block":"none"},children:(0,a.jsx)("form",{children:(0,a.jsx)(h.Z,{select:T,setSelect:e=>{F(e)}})})})]}),(0,a.jsxs)("div",{className:"dropdown mile-rad-range date-range",children:[(0,a.jsxs)("a",{className:"btn btn-date-range text-left",type:"button",id:"date-range-drop","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:()=>f(!1),children:["Select your Mile Radius"," "]}),(0,a.jsx)(p.Z,{initialValueFrom:0,initialValueTo:100,handleSliderValues:e=>{E({from:e.fromValue,to:e.toValue}),0===e.fromValue&&100===e.toValue?_(e=>({...e,isMilesAppy:!1})):_(e=>({...e,isMilesAppy:!0}))}})]})]})}),Array.isArray(S)&&S.length>0&&S.map((e,t)=>{var l,o;return(0,a.jsx)("div",{className:"col-lg-4",children:(0,a.jsxs)("div",{className:"voopan-box",style:L,children:[(0,m.p1)(null==e?void 0:e.voopons_valid_thru)&&(0,a.jsx)("span",{className:"expiring-soon",children:"Expiring soon"}),(0,a.jsx)("div",{className:"voopon-logo",children:(0,a.jsx)(n.default,{width:125,height:125,src:(null==e?void 0:null===(l=e.vooponimage)||void 0===l?void 0:l.image_name)?"".concat(d._n).concat(null==e?void 0:null===(o=e.vooponimage)||void 0===o?void 0:o.image_name):"/images/voopons-logo-1.png",alt:""})}),(0,a.jsxs)("div",{style:{height:"50%"},children:[(0,a.jsx)("div",{className:"voopon-heading",children:R(null==e?void 0:e.voopons_name,2)}),(0,a.jsx)("h5",{children:R(null==e?void 0:e.voopons_description,4)}),(0,a.jsxs)("p",{children:["Valid Thru:"," ",c.ou.fromFormat(null==e?void 0:e.voopons_valid_thru,"yyyy-MM-dd").toFormat("MMMM dd, yyyy")]})]}),(0,a.jsx)(s.default,{className:"btn btn-viewmore",href:"/voopons/".concat(e.unique_number),role:"button",children:"View More"})]})},e.id)}),Array.isArray(S)&&0===S.length&&(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("p",{className:"noDataText",children:"No Voopons "})}),(0,a.jsx)(u.Z,{dataArray:y,pageNo:N,clickPageNumber:e=>{let t=[];for(let e=0;e<y.length;e+=9)t.push(y.slice(e,e+9));I.current&&I.current.scrollIntoView({behavior:"smooth",block:"start"}),j(e),V(t[e-1])},pageLimit:9})]})})})]})})}},26343:function(e,t,l){function a(e){let[t,l,a]=null==e?void 0:e.split("-"),o=new Date(parseInt(t),parseInt(l)-1,parseInt(a)),s=new Date,n=(o.getTime()-s.getTime())/864e5;return!(n<0)&&n<=7}function o(e,t,l){return e.filter(e=>{let a=e.voopan_away_distance;return void 0!==a&&a>=t&&a<=l})}function s(e,t,l){let a=new Date(e),o=new Date(t);if(isNaN(a.getTime())||isNaN(o.getTime()))throw Error("Invalid date format");return l.filter(e=>{let t=new Date(e.voopons_date);return t>=a&&t<=o})}l.d(t,{Fh:function(){return o},Gq:function(){return s},p1:function(){return a}})}}]);